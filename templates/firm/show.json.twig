{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "Organization",
            "name": "{{firm.name}}",
            "foundingDate": "{{ firm.startDate }}",
            "dissolutionDate": "{{ firm.endDate }}",
            "@id": "{{ url('firm_show', {'id':firm.id}) }}",
            "address": {
                "@type": "PostalAddress",
                "addressLocality": "{{ firm.city }}",
                "streetAddress": "{{ firm.streetAddress }}"
            }
        },
            {% for firmRole in firm.getTitleFirmRoles("Publisher") %}{% set book = firmRole.title %}{
            "@type": "Book",
            "@id": "{{ url('title_show', {'id':book.id}) }}",
            "name": "{{book.title}}",
            "datePublished": "{{ book.pubdate }}",
            "locationCreated": "{{ book.locationOfPrinting }}",
            "author": [
                {% for titleRole in book.getTitleRoles("Author") %}{% set author = titleRole.person %}
                {
                    "@type": "Person",
                    "name": "{{ author.firstName }} {{ author.lastName }}",
                    "id": "{{ url('person_show', {'id':author.id}) }}"
                }
                {% if not loop.last %},
                {% endif %}
                {% endfor %}
            ],
            "publisher": [
                {% for titleFirmrole in book.getTitleFirmroles("Publisher") %}{% set publisher = titleFirmrole.firm %}
                {
                    "@id": "{{ url('firm_show', {'id':publisher.id}) }}  "
                }
                {% if not loop.last %},
                {% endif %}
                {% endfor %}
            ]
        }
        {% if not loop.last %},
        {% endif %}
        {% endfor %}
    ]
}