{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "Person",
            "givenName": "{{ person.firstName}}",
            "familyName":"{{ person.lastName}}",
            "sameAs":[
                "{{ person.wikipediaUrl}}",
                "{{ person.viafUrl}}"
            ],
            "birthDate":"{{person.dob}}",
            "deathDate":"{{person.dob}}",
            "birthPlace":"{{person.cityOfBirth}}",
            "deathPlace":"{{person.cityOfDeath}}",
            "@id": "{{ person.id }}"
        },
        {% for titleRole in person.getTitleRoles("Author") %}{% set book = titleRole.title %}{
            "@type": "book",
            "@id":"{{book.id}}",
            "name":"{{book.title}}",
            "Genre":"{{book.genre}}",
            "datePublished":"{{book.pubdate}}",
            "locationCreated": {
                "@type": "Place",
                "name": "{{book.locationOfPrinting}}",
                "geo": {
                    "@type": "GeoCoordinates",
                    "latitude": "{{book.locationOfPrinting.latitude}}",
                    "longitude": "{{book.locationOfPrinting.longitude}}"
                }
            },
            "author": [
            {% for titleRole in book.getTitleRoles("Author") %}{% set author = titleRole.person %}  {
                "@id":"{{ url('person_show', {'id':author.id}) }}"
              },
            {% endfor %}],

            "publisher": [
            {% for titleFirmrole in book.getTitleFirmroles("Publisher") %}{% set firm = titleFirmrole.firm %}  {
                "@type":"Organization",
                "name":"{{firm.name}}",
                "@id":"{{ url('firm_show', {'id':firm.id}) }}",
                "address": "{{ firm.streetAddress }}"
              }
            {% endfor %}]
        }
        {% endfor %}
      ]
}

