{
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "Person",
            "givenName": "{{ person.firstName}}",
            "familyName": "{{ person.lastName}}",
            "sameAs": [
                "{{ person.wikipediaUrl}}",
                "{{ person.viafUrl}}"
            ],
            "birthDate": "{{person.dob}}",
            "deathDate": "{{person.dod}}",
            "birthPlace": "{{person.cityOfBirth}}",
            "deathPlace": "{{person.cityOfDeath}}",
            "@id": "{{ url('person_show', {'id':person.id}) }}"
        },
            {% for titleRole in person.getTitleRoles("Author") %}{% set book = titleRole.title %}{
            "@type": "Book",
            "@id": "{{ url('title_show', {'id':book.id}) }}",
            "name": "{{book.title}}",
            "genre": "{{book.genre}}",
            "datePublished": "{{book.pubdate}}",
            "locationCreated": {
                "@type": "Place",
                "name": "{{book.locationOfPrinting}}",
                "geo": {
                    "@type": "GeoCoordinates",
                    "latitude": "{{book.locationOfPrinting.latitude}}",
                    "longitude": "{{book.locationOfPrinting.longitude}}"
                }
            },
            "author": [
                {% for titleRole in book.getTitleRoles("Author") %}{% set author = titleRole.person %}
                {
                    "@id": "{{ url('person_show', {'id':author.id}) }}"
                }
                {% if not loop.last %},
                {% endif %}

                {% endfor %}
            ],
            "publisher": [
                {% for titleFirmrole in book.getTitleFirmroles("Publisher") %}{% set firm = titleFirmrole.firm %}
                {
                    "@type": "Organization",
                    "name": "{{firm.name}}",
                    "@id": "{{ url('firm_show', {'id':firm.id}) }}",
                    "address": "{{ firm.streetAddress }}"
                }
                {% if not loop.last %},
                {% endif %}

                {% endfor %}
            ]
        }
        {% if not loop.last %},
        {% endif %}

        {% endfor %}
    ]
}

